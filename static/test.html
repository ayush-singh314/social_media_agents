<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creator Agent Hub - Test Page</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                    <h1>Creator Agent Hub</h1>
                </div>
                <p class="tagline">AI-Powered Content Creation Workflow</p>
            </div>
        </header>

        <main class="workflow-container">
            <div class="workflow-steps">
                <div class="workflow-step active">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-info">
                            <h3><i class="fas fa-lightbulb"></i> Test Connection</h3>
                            <p>Test the API connection and agent functionality</p>
                        </div>
                    </div>
                    <div class="step-content">
                        <div class="input-group">
                            <label for="test-media-url">Test Media URL:</label>
                            <input type="url" id="test-media-url" placeholder="https://example.com/image.jpg" aria-label="Test Media URL">
                            <small style="color: #a0a0a0; font-size: 0.8rem;">Optional: Add an image URL to test media functionality</small>
                        </div>
                        <button class="btn-primary" onclick="testAPI()">
                            <i class="fas fa-wifi"></i> Test API Connection
                        </button>
                        <div class="results" id="test-results">
                            <p>Click the button above to test the API connection</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <aside class="agent-status">
            <h3><i class="fas fa-microchip"></i> System Status</h3>
            <div class="agent-list">
                <div class="agent-item">
                    <i class="fas fa-server"></i>
                    <span>API Server</span>
                    <div class="status idle">Unknown</div>
                </div>
                <div class="agent-item">
                    <i class="fas fa-database"></i>
                    <span>Database</span>
                    <div class="status idle">Unknown</div>
                </div>
            </div>
        </aside>
    </div>

    <script>
        async function testAPI() {
            const resultsDiv = document.getElementById('test-results');
            const apiStatus = document.querySelector('.agent-item .status');
            
            resultsDiv.innerHTML = '<p>Testing API connection...</p>';
            apiStatus.textContent = 'Testing';
            apiStatus.className = 'status working';
            
            try {
                const response = await fetch('http://127.0.0.1:8000/api/health');
                
                if (response.ok) {
                    const data = await response.json();
                    resultsDiv.innerHTML = `
                        <div class="success-message">
                            <h4><i class="fas fa-check-circle"></i> API Connection Successful!</h4>
                            <p>Server is running and responding correctly.</p>
                            <p><strong>Status:</strong> ${data.status || 'Healthy'}</p>
                        </div>
                    `;
                    apiStatus.textContent = 'Online';
                    apiStatus.className = 'status success';
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="error-message">
                        <h4><i class="fas fa-exclamation-triangle"></i> API Connection Failed</h4>
                        <p>Error: ${error.message}</p>
                        <p>Make sure the server is running on http://127.0.0.1:8000</p>
                    </div>
                `;
                apiStatus.textContent = 'Offline';
                apiStatus.className = 'status error';
            }
        }
    </script>
</body>
</html>
